{% extends "navbar.html" %}

{% block styles %}
	<link href="{{ url_for('static', filename='master.css', _external=True) }}" rel='stylesheet' type='text/css'>
	<link href="{{ url_for('static', filename='all-recipes.css', _external=True) }}" rel='stylesheet' type='text/css'>
{% endblock %}

{% block content %}
<main id="block1" onclick="closeDropdown()">
	<div class="block1inner">
		<div id="recipenav">
			<div class="recipenavleft">
				<input type="button" class="recbtn recbtn1 recbtn-active" onclick="window.location.href='{{ url_for('allRecipes') }}';" value="All Recipes"
				><input type="button" class="recbtn recbtn2" onclick="window.location.href='{{ url_for('favorites') }}';" value="Favorites"
				><input type="button" class="recbtn recbtn3" onclick="window.location.href='{{ url_for('categories') }}';" value="Categories">
			</div>
			<div class="recipenavright">
				<div class="settingsbtn">
					<button class="btn2 btn2-default" onclick="toggleSettings()">
						<span class="btn2-icon"><img src="{{ url_for('static', filename='settings.png', _external=True) }}" alt=""></span>
					</button>
					<div class="settings-content" id="settingsDrop">
						<h3>Display Settings</h3>
						<form method="post" novalidate>
							{{ form.hidden_tag() }}
							<label>Recipe Size</label>
							{{ form.recipe_size }}
							<div class="custom-select">
								<div class="cust-select">
									<label class="control-label">Sort By</label><br>
									{{ form.sort_by }}
								</div>
							</div>
							{{ form.submit(class="btn btn3-default") }}
						</form>
					</div>
				</div>
				<button class="btn btn-default" onclick="window.location.href='{{ url_for('addRecipe') }}';">
                                        <span class="btn-text">Add Recipe</span>
                                        <span class="btn-icon"><img src="{{ url_for('static', filename='add-recipe-button.png', _external=True) }}" alt=""></span>
				</button>
				<div class="search-cont">
					<input class="search-box" id="search" name="search" placeholder="Search" value="">
				</div>
			</div>
		</div>
		{% with messages = get_flashed_messages() %}
		{% if messages %}
		{% for message in messages %}
		{% if 'Error' in message %}
		<p id="flashed-err">{{ message }}</p>
		{% else %}
		<p id="flashed-norm">{{ message }}</p>
		{% endif %}
		{% endfor %}
		{% endif %}
		{% endwith %}

		{% if recipes %}
		{% if user.pref_size == 0 %}
		<div id="recipecont" class="recipe1cont">
		{% for item in recipes %}
		<a href="{{ url_for('recipeDetail', hexid=item.hex_id) }}">
		<div class="recipe1" data-bgimage="{{ url_for('recipePhotos', filename=item.photo, _external=True) }}">
			<div class="r1bottom">
				<div class="recipe1-text">
					<div>{{ item.title }}</div>
				</div>
			</div>
		</div>
		</a>
		{% endfor %}
		</div>
		{% else %}
		<div id="recipecont" class="recipe2cont">
		{% for item in recipes %}
		<a href="{{ url_for('recipeDetail', hexid=item.hex_id) }}">
		<div class="recipe2">
			<div class="recipe2inner">
				<div class="r2top" data-bgimage="{{ url_for('recipePhotos', filename=item.photo, _external=True) }}"></div>
				<div class="r2bottom">
					<div>{{ item.title }}</div>
					<span>{{ item.category }}</span>
				</div>
			</div>
		</div>
		</a>
		{% endfor %}
		</div>
		{% endif %}
		{% else %}
		<p id="norecipes">Welcome to Tamari!<br><br>There are no recipes to display.<br><br>Click the "Add Recipe" button above to get started.</p>
		{% endif %}
		{% if prev_url or next_url %}
		<div class="prevnext">
			{% if prev_url %}
			<button class="btn-prev" onclick="window.location.href='{{ prev_url }}';">
				<span class="btn-prev-icon"><img src="{{ url_for('static', filename='prev.png', _external=True) }}" alt=""></span>
				<span class="btn-prev-text">Previous</span>
			</button>
			{% endif %}
			{% if next_url %}
			<button class="btn-next" onclick="window.location.href='{{ next_url }}';">
				<span class="btn-next-text">Next</span>
				<span class="btn-next-icon"><img src="{{ url_for('static', filename='next.png', _external=True) }}" alt=""></span>
			</button>
			{% endif %}
		</div>
		{% endif %}
	</div>
</main>
{% endblock %}
