{% extends "navbar.html" %}

{% block styles %}
	<link href="{{ url_for('static', filename='master.css', _external=True) }}" rel='stylesheet' type='text/css'>
	<link href="{{ url_for('static', filename='categories.css', _external=True) }}" rel='stylesheet' type='text/css'>
{% endblock %}

{% block content %}
<main id="block1" onclick="closeDropdown()">
	<div class="block1inner">
		<div id="recipenav">
			<div class="recipenavleft">
				<input type="button" class="recbtn recbtn1" onclick="window.location.href='{{ url_for('allRecipes') }}';" value="All Recipes"
				><input type="button" class="recbtn recbtn2" onclick="window.location.href='{{ url_for('favorites') }}';" value="Favorites"
				><input type="button" class="recbtn recbtn3 recbtn-active" onclick="window.location.href='{{ url_for('categories') }}';" value="Categories">
			</div>
			<div class="settingsbtn">
				<button class="btn2 btn2-default" onclick="toggleSettings()">
					<span class="btn2-icon"><img id="settingsimg" src="{{ url_for('static', filename='settings.png', _external=True) }}" alt=""></span>
				</button>
				<div class="settings-content" id="settingsDrop">
					<h3>Display Settings</h3>
					<form method="post" novalidate>
						{{ form.hidden_tag() }}
						<label>Recipe Size</label>
						{{ form.recipe_size }}
						<div class="custom-select">
							<div class="cust-select">
								<label class="control-label">Sort By</label><br>
								{{ form.sort_by }}
							</div>
						</div>
						{{ form.submit(class="btn btn3-default") }}
					</form>
				</div>
			</div>
		</div>
		{% for message in get_flashed_messages() %}
		{% if 'Error' in message %}
		<p id="flashed-err">{{ message }}</p>
		{% else %}
		<p id="flashed-norm">{{ message }}</p>
		{% endif %}
		{% endfor %}
		<div id="b1left">
			<div class="b1leftinner">
				<div>
					<form method="post" novalidate>
						{{ form2.hidden_tag() }}
						{{ form2.category(class="form-control", placeholder="Add a Category") }}
						<button class="btn5-default" id="submitcat" name="submitcat" value="submitcat">
							<span class="btn5-icon"><img id="addrecipeimg" src="{{ url_for('static', filename='add-recipe-button.png', _external=True) }}" alt=""></span>
						</button>
					</form> 
				</div>
				{% if categories %}
				{% for item in categories %}
				<div{% if query_string is none %}{% if item.label == 'Miscellaneous' %} class="cat-selected"{% endif %}{% else %}{% if item.label == query_string %} class="cat-selected"{% endif %}{% endif %}>
					<span class="cat-label"><a href="{{ url_for('categories', c=[item.label]) }}">{{ item.label }}</a></span>
					<span class="cat-label2"><a href="{{ url_for('mobileCategory', catname=item.label) }}">{{ item.label }}</a></span>
					<a class="cat-trash" href="{{ url_for('removeCategory', catid=item.hex_id) }}" onclick="return confirm('Are you sure you want to delete the category {{ item.label }}?');" title="Delete Category">
						<img class="trashimg" src="{{ url_for('static', filename='trash.png', _external=True) }}" width="20" height="20" alt="">
					</a>
				</div>
				{% endfor %}
				{% endif %}
			</div>
		</div>
		<div id="b1right">
			{% if query_string %}
			{% if query_string in cats %}
			<p id="recipecount">Showing {{ recipe_count }} recipes in '{{ query_string }}' category.</p>
			{% else %}
			<p id="recipecount">The requested category does not exist.</p>
			{% endif %}
			{% else %}
			<p id="recipecount">Showing {{ recipe_count }} recipes in 'Miscellaneous' category.</p>
			{% endif %}
			{% if recipes %}
			{% if user.pref_size == 0 %}
			<div id="recipecont" class="recipe1cont">
			{% for item in recipes %}
			<a href="{{ url_for('recipeDetail', hexid=item.hex_id) }}">
			<div class="recipe1" data-bgimage="{{ url_for('recipePhotos', filename=item.photo, _external=True) }}">
				<div class="r1bottom">
					<div class="recipe1-text">
						<div>{{ item.title }}</div>
					</div>
				</div>
			</div>
			</a>
			{% endfor %}
			</div>
			{% else %}
			<div id="recipecont" class="recipe2cont">
			{% for item in recipes %}
			<a style="display: contents;" href="{{ url_for('recipeDetail', hexid=item.hex_id) }}">
			<div class="recipe2">
				<div class="recipe2inner">
					<div class="r2top" data-bgimage="{{ url_for('recipePhotos', filename=item.photo, _external=True) }}"></div>
					<div class="r2bottom">
						<div>{{ item.title }}</div>
						<span>{{ item.category }}</span>
					</div>
				</div>
			</div>
			</a>
			{% endfor %}
			</div>
			{% endif %}
			{% endif %}
			{% if prev_url or next_url %}
                	<div class="prevnext">
                        	{% if prev_url %}
                        	<button class="btn-prev" onclick="window.location.href='{{ prev_url }}';">
                                	<span class="btn-prev-icon"><img id="previmg" src="{{ url_for('static', filename='prev.png', _external=True) }}" alt=""></span>
                                	<span class="btn-prev-text">Previous</span>
                        	</button>
                        	{% endif %}
                        	{% if next_url %}
                        	<button class="btn-next" onclick="window.location.href='{{ next_url }}';">
                                	<span class="btn-next-text">Next</span>
                                	<span class="btn-next-icon"><img id="nextimg" src="{{ url_for('static', filename='next.png', _external=True) }}" alt=""></span>
                        	</button>
                        	{% endif %}
                	</div>
                	{% endif %}
		</div>

	</div>
</main>
{% endblock %}
